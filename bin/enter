#! /usr/bin/env node

const chalk = require("chalk")
const program = require("commander")
const log = console.log
const figlet = require("figlet")
// 版本
const v = require("../package.json").version
program
  // 简要
  .name("cli-dao")
  .usage(`<command> [option]`)
  .version(`cli-dao ${v}`)


// 创建命令
program
  .command(`create <project-name>`)
  // 描述信息
  .description(`create a new project`)
  // 强制覆盖
  .option(`-f --force`, "overwrite target directory if it exists")
  .action((projectName, cmd) => {
    // 引入 create模块
    require("../lib/create")(projectName, cmd)
  })

// 监听 --help 指令
program.on("--help", () => {
  const logo = figlet.textSync('cli-dao', {
    font: '3D-ASCII',
    horizontalLayout: 'default',
    verticalLayout: 'default',
    width: 80,
    whitespaceBreak: true
  })

  log(`\n Run ${chalk.cyan("cli-dao <command> --help")} for detailed usage of given command. \n`)
  log(logo)
})

program.parse(process.argv)
